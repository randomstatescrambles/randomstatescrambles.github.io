
<!DOCTYPE html>
<html>
	<!-- vim: set ts=3 nowrap : -->
	<head>
	<!-- vim: set ts=3 : -->
	<meta charset='UTF-8'>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="description" content="minHumdrum: Minimal generalized Humdrum data parsing library in C++">
	<link rel="canonical" 
		href="http://min.humdrum.org/">
	<!-- meta http-equiv="X-UA-Compatible" content="IE=edge" -->
	<link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
	<link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen">
	<link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print">
	<script src="/javascripts/handlebars-v2.0.0.js"></script>
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<title>
		
			minHumdrum
		
	</title>

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/stylesheets/main.css">

	<!-- JavaScript -->
	<script src="/javascripts/external-links.js"></script>
	

	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	        var pageTracker = _gat._getTracker("UA-66501284-1");
		pageTracker._trackPageview();
	} catch(err) {}
</script>

	
<script>
// vim: ts=3 hlsearch ft=javascript
//
// This event listener converts various span classes into internal
// hyperlinks on the website.  This allows the various locations for
// the resources to be moved around, and all new links can be corrected
// at the same time by adjusting the hyperlink addresses in this file.
//

window.addEventListener("DOMContentLoaded", function(event) {
	processClassLinks();
	processFunctionLinks();
	processTutorialLinks();
});



//////////////////////////////
//
// processClassLinks -- Convert span element such as this:
//       <span class="class-link">MidiMessage</span>
//    into a hyperlink in this form:
//       <span class="class-link">
//          <a href="/class/MidiMessage">MidiMessage</a>
//       </span>
//    If the class name does not match the text of the span element,
//    then a cname attribute can list the class name:
//       <span class="class-link" cname="MidiMessage">MidiMessages</span>
//    will get converted into:
//       <span class="class-link">
//          <a href="/class/MidiMessage">MidiMessages</a>
//       </span>
//

function processClassLinks() {
	var spans = document.querySelectorAll("span.class-link");
	for (var i=0; i<spans.length; i++) {
		var clink = spans[i].innerHTML;
		var cname = spans[i].getAttribute('cname');
		if (cname) {
			var temp = cname;
			cname = clink;
			clink = temp;
		} else {
			cname = clink;
		}
		if (clink.match(/[<>]/)) {
			// don't redo links if they were already done.
			continue;
		}
		var text = '<a href="/class/' + clink + '">' + cname + '</a>';
		spans[i].innerHTML = text;
	}
}



//////////////////////////////
//
// processFunctionLinks -- Span elements for linking to specific functions:
//      <span class="function-link" cname="MidiFile">linkNotePairs</span>
//   get converted into hyperlinks with this form:
//      <span class="functionlink" cname="MidiFile">
//         <a href="/class/MidiMessage/#linkNotePairs">linkNotePairs</a>
//      </span>
//
//  Or to explicitly display the class scope:
//      <span class="function-link">MidiFile::linkNotePairs</span>
//  which converts to:
//      <span class="function-link">
//         MidiFile::
//         <a href="/class/MidiFile/#linkNotePairs</a>
//      </span>
//

function processFunctionLinks() {
	var spans = document.querySelectorAll("span.function-link");
	for (var i=0; i<spans.length; i++) {
		var libclass = spans[i].getAttribute("cname");
		var text = spans[i].innerHTML;
		if (text.match(/[<>]/)) {
		// don't redo links if they were already done.
		continue;
		}
		var matches = text.match(/(.*)::(.*)/);
		if (matches) {
			var classname = matches[1];
			var fname = matches[2];
			if (!libclass) {
				libclass = classname;
			}
			text = libclass;
			text += '::';
			text += '<a href="/class/' + libclass
			text += '/#' + fname + '">' + fname + '</a>';
		} else {
			text = '<a href="/class/' + libclass + '/#' + fname + '">'
						+ fname + '</a>';
		}
		spans[i].innerHTML = text;
	}
}



//////////////////////////////
//
// processTutorialLinks -- Convert span element such as this:
//       <span class="tutorial-link">mirror</span>
//    into a hyperlink in this form:
//       <span class="class-link">
//          <a href="/tutorial/mirror">mirror</a>
//       </span>
//

function processTutorialLinks() {
	var spans = document.querySelectorAll("span.tutorial-link");
	for (var i=0; i<spans.length; i++) {
		var tutorial = spans[i].innerHTML;
		if (tutorial.match(/[<>]/)) {
			// don't redo links if they were already done.
			continue;
		}
		var text = '<a href="/tutorial/' + tutorial + '">' + tutorial + '</a>';
		spans[i].innerHTML = text;
	}
}


</script>





</head>

	<body>
		<div id="container">
			<div class="inner">
					
		<section class="page-header">
		<h1 class="project-name">minHumdrum</h1>
		<h2 class="project-tagline">Minimal generalized Humdrum data parsing library in C++</h2>
		<a href="https://github.com/craigsapp/minHumdrum" class="btn">View on GitHub</a>
		<a href="https://github.com/craigsapp/minHumdrum/zipball/master" class="btn">Download .zip</a>
		<a href="https://github.com/craigsapp/minHumdrum/tarball/master" class="btn">Download .tar.gz</a>
	
</section>









				<section id="main-content" class="main-content">
					<h1>minHumdrum</h1>

<p>The minHumdrum library is a set of C++ classes for parsing
<a href="http://www.humdrum.org">Humdrum</a> file data.  The library is designed
to be portable, consisting of two files that can be copied into
your project:</p>

<ol>
<li>An include file <a href="https://github.com/craigsapp/minHumdrum/blob/master/include/minhumdrum.h">minhumdrum.h</a></li>
<li>and a source file <a href="https://github.com/craigsapp/minHumdrum/blob/master/src/minhumdrum.cpp">minhumdrum.cpp</a></li>
</ol>

<p>The classes use some C++11-specific features, so add the
<code>-stc=c++11</code> option when compiling with GNU g++ or clang++ compiler.
Also include the <code>-stdlib=libc++</code> when compiling with clang.  See the
<a href="https://github.com/craigsapp/minHumdrum/blob/master/Makefile">Makefile</a> 
for compiling the library and
<a href="https://github.com/craigsapp/minHumdrum/blob/master/Makefile.examples">Makefile.examples</a> 
for linking to create executables.</p>

<h1>Downloading</h1>

<p>To download using git, type:</p>
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">git clone https://github.com/craigsapp/minHumdrum</span>
</code></pre></div>
<p>To update to the most recent version of minHumdrum, type in the minHumdrum directory:</p>
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">git pull</span>
</code></pre></div>
<h1>Compiling</h1>

<p>When downloading the git repository or a zip/tarball of the repository,
compile the library with the command:</p>
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">make</span>
</code></pre></div>
<p>This should create the file <code>lib/libminhumdrum.a</code>, which can be
used to link to other program code. (But note that you also simply
add the .h and .cpp files listed above into your own project files
if you don&#39;t want to link against a separately compiled library
file).</p>

<p>For testing purposes, another form of the library can be compiled
from the individual source files for each class:</p>
<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">make lib</span>
</code></pre></div>
<p>This will create the file <code>lib/libhumdrum.a</code>.</p>

<h1>Resources</h1>

<ul>
<li> <a href=class>Class documentation</a>
</ul>

<h1>Code snippets</h1>

<p>Here are examples of how to access data in a Humdrum score using the
minHumdrum classes:</p>

<p>1: Read Humdrum data from a file, string or istream:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">HumdrumFile</span> <span class="n">infile</span><span class="p">;</span>
<span class="n">infile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">filename</span><span class="p">);</span>
<span class="n">infile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">string</span> <span class="n">filename</span><span class="p">);</span>
</code></pre></div>
<p>To read content from a char* or string:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">stringstream</span> <span class="n">content</span><span class="p">);</span>
<span class="n">infile</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">istream</span> <span class="n">content</span><span class="p">);</span>
<span class="n">infile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="p">);</span>
<span class="n">infile</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">content</span><span class="p">);</span>
<span class="n">infile</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">string</span> <span class="n">content</span><span class="p">);</span>
</code></pre></div>
<p>2: Access the token in the second field of the fourth line (<code>12e</code> in the above example). This can be done in two ways: either address the HumdrumLine by the [] operator of HumdrumFile and then the data files with HumdrumLine::token, or access the HumdrumToken directly from the HumdrumFile::token function, giving the line and field index as arguments.</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">token</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>    <span class="c1">// 12e</span>
<span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>    <span class="c1">// 12e</span>
</code></pre></div>
<p>3: HumdrumTokens inherit from std::string, so the text of the token can be accessed in several ways:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">)</span><span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>   <span class="c1">// &quot;12e&quot;</span>
<span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="n">c_str</span><span class="p">();</span>        <span class="c1">// &quot;12e&quot;</span>
</code></pre></div>
<p>4: To access the parsed duration of the token, use the HumdrumToken::getDuration function.  The return value of getDuration() is a &quot;HumNum&quot; which is a rational number, or fraction, consisting of an integer numerator and denominator.  The HumNum::getFloat() function will return the duration as a double:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="n">getDuration</span><span class="p">();</span>              <span class="c1">// 1/3    for &quot;12e&quot;</span>
<span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="n">getDuration</span><span class="p">().</span><span class="n">getFloat</span><span class="p">();</span>   <span class="c1">// 0.3333 for &quot;12e&quot;</span>
</code></pre></div>
<p>5: HumdrumLines also possess duration:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">getDuration</span><span class="p">();</span>  <span class="c1">// 1/6 (1/6th of a quarter note, due to the polyrhythm between the parts)</span>
</code></pre></div>
<p>6: HumdrumFiles also possess duration:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">getDuration</span><span class="p">();</span>    <span class="c1">// 3 (one measure of 3/4)</span>
</code></pre></div>
<p>7: When converting Humdrum files into MIDI, MuseData, MusicXML or SKINI, the function HumdrumFile::tpq (ticks per quarter note) will return the minimum number of fractional time units necessary to describe all rhythms in the file as integer durations.</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">tpq</span><span class="p">();</span>           <span class="c1">// 6 = minimum time unit is a triplet sixteenth note for example</span>
</code></pre></div>
<p>In the case of the musical example further above, the smallest duration is a triplet eighth note, but the minimum time unit between
both parts is a triplet sixteenth note when considering the polyrhythmic interaction between the parts.</p>

<p>8: Durations can be expressed in ticks by giving the tpq value as an argument to the duration functions:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">tpq</span> <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">tpq</span><span class="p">();</span>                           <span class="c1">// 6 ticks per quarter note</span>
<span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">).</span><span class="n">getDuration</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">toInteger</span><span class="p">();</span>  <span class="c1">// 2 ticks for a triplet eighth note</span>
<span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">getDuration</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">toInteger</span><span class="p">();</span>           <span class="c1">// 1 tick for a triplet sixteenth note</span>
<span class="n">infile</span><span class="p">.</span><span class="n">getDuration</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">toInteger</span><span class="p">();</span>              <span class="c1">// 18 ticks for three quarter notes</span>
</code></pre></div>
<p>9: Get the total number of HumdrumLines in a HumdrumFile:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">getLineCount</span><span class="p">();</span>    <span class="c1">// 12</span>
</code></pre></div>
<p>10: Get the total number of token fields on a HumdrumLine:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">getTokenCount</span><span class="p">();</span>  <span class="c1">// 2</span>
<span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">getFieldCount</span><span class="p">();</span>  <span class="c1">// 2</span>
</code></pre></div>
<p>12: Get the total number of spines/tracks in a HumdrumFile:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">getMaxTrack</span><span class="p">();</span>   <span class="c1">// 2</span>
<span class="n">infile</span><span class="p">.</span><span class="n">getMaxSpine</span><span class="p">();</span>   <span class="c1">// 2</span>
</code></pre></div>
<p>11: Get the track number for a token:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">getTrack</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>   <span class="c1">// 2 = second track in file.</span>
</code></pre></div>
<p>The &quot;1&quot; is the field number for the second token on the 4th line, which is in the second track of the file.</p>

<p>12: Get the sub-track number for a token:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">getSubtrack</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// 0</span>
</code></pre></div>
<p>In this case the spine has not split, so the sub-track assignment is 0.  If there were a spine split, then
the sub-track count would start at 1 for the first token on the line in a track, the next token in the
spine would be sub-track 2, and so on.</p>

<p>13: Get the first token in the second spine/track (second <code>**kern</code> token on the first line):</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">infile</span><span class="p">.</span><span class="n">getTrackStart</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</code></pre></div>
<p>Note that this will return a pointer rather than a reference to the token.</p>

<p>14:  Ask the starting token how many tokens precede/follow the starting token in the second spine:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">HumdrumToken</span><span class="o">*</span> <span class="n">tok</span> <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">getTrackStart</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">tok</span><span class="o">-&gt;</span><span class="n">getNextTokenCount</span><span class="p">();</span>           <span class="c1">// 1 token following in the spine</span>
<span class="n">tok</span><span class="o">-&gt;</span><span class="n">getPreviousTokenCount</span><span class="p">();</span>       <span class="c1">// 0 tokens preceding in the spine</span>
<span class="n">tok</span><span class="o">-&gt;</span><span class="n">getNextToken</span><span class="p">();</span>                <span class="c1">// returns pointer to `*M3/4`, using default value of 0 for argument.</span>
<span class="n">tok</span><span class="o">-&gt;</span><span class="n">getPreviousToken</span><span class="p">();</span>            <span class="c1">// returns NULL</span>
</code></pre></div>
<p>The HumdrumToken::getNextTokenCount() function will return 0 for the last token in a spine/track (which always must
be the characters <code>*-</code> (start-minus) which is the data terminator token.</p>

<h1>Code example</h1>

<p>Below is an example program that uses the minHumdrum library to convert a Humdrum file into a MIDI-like listing of notes in the Humdrum score:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &quot;minhumdrum.h&quot;</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">minHumdrum</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">printNoteInformation</span><span class="p">(</span><span class="n">HumdrumFile</span><span class="o">&amp;</span> <span class="n">infile</span><span class="p">,</span> <span class="kt">int</span> <span class="n">line</span><span class="p">,</span> <span class="kt">int</span> <span class="n">field</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tpq</span><span class="p">)</span> <span class="p">{</span>
   <span class="kt">int</span> <span class="n">starttime</span> <span class="o">=</span> <span class="n">infile</span><span class="p">[</span><span class="n">line</span><span class="p">].</span><span class="n">getDurationFromStart</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">getInteger</span><span class="p">();</span>
   <span class="kt">int</span> <span class="n">duration</span>  <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">field</span><span class="p">).</span><span class="n">getDuration</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">getInteger</span><span class="p">();</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">Convert</span><span class="o">::</span><span class="n">kernToSciPitch</span><span class="p">(</span><span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="o">&lt;&lt;</span> <span class="sc">&#39;\t&#39;</span> <span class="o">&lt;&lt;</span> <span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">field</span><span class="p">).</span><span class="n">getTrackString</span><span class="p">()</span>
        <span class="o">&lt;&lt;</span> <span class="sc">&#39;\t&#39;</span> <span class="o">&lt;&lt;</span> <span class="n">starttime</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\t&#39;</span> <span class="o">&lt;&lt;</span> <span class="n">duration</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">HumdrumFile</span> <span class="n">infile</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">infile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="kt">int</span> <span class="n">tpq</span> <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">tpq</span><span class="p">();</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TPQ: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tpq</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;PITCH</span><span class="se">\t</span><span class="s">TRACK</span><span class="se">\t</span><span class="s">START</span><span class="se">\t</span><span class="s">DURATION&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">infile</span><span class="p">.</span><span class="n">getLineCount</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">infile</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">isData</span><span class="p">())</span> <span class="p">{</span>
         <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">infile</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">getTokenCount</span><span class="p">();</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">).</span><span class="n">isNull</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">infile</span><span class="p">.</span><span class="n">token</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">).</span><span class="n">isDataType</span><span class="p">(</span><span class="s">&quot;kern&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">printNoteInformation</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">tpq</span><span class="p">);</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Notice that all minHumdrum code is placed into the minHumdrum namespace.</p>

<p>Test data for use with the above program:</p>

<p><img src="https://cdn.rawgit.com/craigsapp/minHumdrum/gh-pages/images/hum2notelist.svg" alt="Example music"></p>

<table style="border-collapse: separate; margin-left:auto; margin-right:auto">
<tr><td style="border:0">
Example input:<br>
<pre style="tab-stop: 12; font-family: Courier; text-align:left">
**kern  **kern
*M3/4   *M3/4
8C      12d
.       12e
8B      .
.       12f
*       *^
4A      2g      4d
4G      .       4c
*       *v      *v
=       =
*-      *-
</pre>
</td><td style="border:0">
Example output:<br>
<pre style="font-family: Courier; text-align:left">
TPQ: 6
PITCH   TRACK   START   DURATION
C3      1       0       3
D4      2       0       2
E4      2       2       2
B3      1       3       3
F4      2       4       2
A3      1       6       6
G4      2.1     6       12
D4      2.2     6       6
G3      1       12      6
C4      2.2     12      6
</pre>
</td></tr></table>

<p></center></p>

<p>If you are using the minHumdrum project directory, place
programs into a subdirectory called <code>myprograms</code> and then to compile,
go to the base directory of the minHumdrum code and type <code>make myprogram</code>
if the program is called <code>myprograms/myprogram.cpp</code>.  The compiled program
will be created as <code>bin/myprogram</code>.</p>

<h2>Extracting spines/tracks (~parts)</h2>

<p>Here is another example showing one of the methods which can be used to extract data for
a specific part out of the full-score arrangement of the HumdrumFile data:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &quot;minhumdrum.h&quot;</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">minHumdrum</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">printNoteInformation</span><span class="p">(</span><span class="n">HumdrumToken</span><span class="o">*</span> <span class="n">tok</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tpq</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">tok</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">tok</span><span class="o">-&gt;</span><span class="n">isNonNullData</span><span class="p">())</span> <span class="p">{</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">-&gt;</span><span class="se">\t</span><span class="s">&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">Convert</span><span class="o">::</span><span class="n">kernToSciPitch</span><span class="p">(</span><span class="o">*</span><span class="n">tok</span><span class="p">)</span>
           <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tok</span><span class="o">-&gt;</span><span class="n">getTrackString</span><span class="p">()</span>
           <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tok</span><span class="o">-&gt;</span><span class="n">getDurationFromStart</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">getInteger</span><span class="p">()</span>
           <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tok</span><span class="o">-&gt;</span><span class="n">getDuration</span><span class="p">(</span><span class="n">tpq</span><span class="p">).</span><span class="n">getInteger</span><span class="p">();</span>
   <span class="p">}</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="n">HumdrumFile</span> <span class="n">infile</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">infile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="kt">int</span> <span class="n">tpq</span> <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">tpq</span><span class="p">();</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TPQ: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tpq</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
   <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;ORIG</span><span class="se">\t\t</span><span class="s">PITCH</span><span class="se">\t</span><span class="s">TRACK</span><span class="se">\t</span><span class="s">START</span><span class="se">\t</span><span class="s">DURATION&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

   <span class="c1">// get the first token in the first spine:</span>
   <span class="n">HumdrumToken</span><span class="o">*</span> <span class="n">tok</span> <span class="o">=</span> <span class="n">infile</span><span class="p">.</span><span class="n">getTrackStart</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
   <span class="c1">// then iterate to the end of the spine:</span>
   <span class="k">while</span> <span class="p">(</span><span class="n">tok</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">printNoteInformation</span><span class="p">(</span><span class="n">tok</span><span class="p">,</span> <span class="n">tpq</span><span class="p">);</span>
      <span class="n">tok</span> <span class="o">=</span> <span class="n">tok</span><span class="o">-&gt;</span><span class="n">getNextToken</span><span class="p">();</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>This program should produce the following output given the example input:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">TPQ: 6
ORIG            PITCH   TRACK   START   DURATION
**kern
*M4/4
8C      -&gt;      C3      1       0       3
.
8B      -&gt;      B3      1       3       3
.
*
4A      -&gt;      A3      1       6       6
4G      -&gt;      G3      1       12      6
*
=
*-
</code></pre></div>
<h1>Parsing extensions</h1>

<p>Standard Humdrum files are encoded as
<a href="https://en.wikipedia.org/wiki/Tab-separated_values">TSV</a> (Tab
Separated Values).  The minHumdurm library can also read and write
data in the <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a>
(Comma Separate Values) format.  This serves two purposes: (1) for
people who cannot wrap their minds around the concept of a tab
character, and (2) for text processing which may munge tabs
(particularly when copy/pasting Humdrum files into email messages).</p>

<p>Use the HumdrumFile::printCSV() funtion to print Humdrum data in the
CSV format.  The example file in CSV format:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">**kern,**kern
*M4/4,*M4/4
8C,12d
.,12e
8B,.
.,12f
*,*^
4A,2g,4d
4G,.,4c
*,*v,*v
=,=
*-,*-
</code></pre></div>
<p>CSV files can be read into a HumdrumFile object by appending &quot;CSV&quot; to the
various read functions, such as readCSV() and parseCSV().</p>

				</section>
				<!-- vim: set ts=3 nowrap : -->
<footer>
<!--
          Midifile is maintained by <a href="https://github.com/craigsapp">craigsapp</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
-->
</footer>

			</div>
		</div>
	</body>
</html>

